<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8"/>
  <title>Rock Paper Scissors</title>
</head>

<body>
    <p>Open the console(F12) to play Rock Paper Scissors! Write game() to restart.</p>
  <script>

    function convertTextToNumber(input) {
      if (input === null) { /* Clicked on Cancel */
        return 0;
      }

      input = input.trim();
      input = input.toUpperCase();
  
      switch (input) {
        case "ROCK":
          return 1;
          break;
        case "PAPER":
          return 2;
          break;
        case "SCISSORS":
          return 3;
          break;
        default: /* invalid input */
          return 0;
      }
    }

    function convertNumberToText(input) {
      switch (input) {
        case 1:
          return "Rock";
          break;
        case 2:
          return "Paper";
          break;
        case 3:
         return "Scissors";
         break;
        default:
          return "Invalid input";
      }
    }


    function getPlayerAnswer() {
      let answer = prompt("Rock, paper, or scissors?");
      return convertTextToNumber(answer);
    }
    
    function computerPlay() {
      let computerAnswer = Math.floor(Math.random() * 3 + 1);
      return computerAnswer;
    }
    
    let textPlayerSelection;
    let textComputerSelection;
    function playRound(playerSelection, computerSelection) {
      if (playerSelection === 0) { /* Warn the user about invalid input */
/*        console.log("Invalid input!"); */
        alert("Invalid input!");
        return null;
      }
      textPlayerSelection = convertNumberToText(playerSelection);
      textComputerSelection = convertNumberToText(computerSelection);
      if (playerSelection === computerSelection) {
        return 0;
      } else if ( (playerSelection === 1 && computerSelection === 3) || (playerSelection === 2 && computerSelection === 1) || (playerSelection === 3 && computerSelection === 2) ) {
        /* The player wins */
        return 1;
      } else {
        /* The computer wins */
        return -1;
      }
    }

    function displayScore(playerScore, computerScore) {
      let message = `Player: ${playerScore}, Computer: ${computerScore}`
      console.log(message);
    }
    
    function game(){
      console.log("5 rounds, starting now!")
      let playerScore = 0;
      let computerScore = 0;
      
      for (let rounds = 1; rounds < 6; rounds++) { /*Play the 5 rounds */
/*        console.log(rounds); */
        let roundOutcome = playRound(getPlayerAnswer(), computerPlay());
        
        if (roundOutcome === null) {      /* Invalid player input. Dont do anything and play the round again */
          rounds = rounds -1;
        } else if (roundOutcome === 1) {  /* Player wins the round */
          playerScore++;
          console.log(`You win! ${textPlayerSelection} beats ${textComputerSelection}`);
          displayScore(playerScore, computerScore);
        } else if (roundOutcome === -1) { /* Computer wins the round */
          computerScore++;
          console.log(`You loose! ${textComputerSelection} beats ${textPlayerSelection}`);
          displayScore(playerScore, computerScore);
        } else {                          /* Draw */
          console.log(`You both choose ${textPlayerSelection}!`);
          displayScore(playerScore, computerScore);
        }
      }
      
      if (playerScore > computerScore) {
        console.log("You won the game!");
      } else if (playerScore < computerScore){
        console.log("You lost :(")
      } else {
        console.log("Draw!")
      }
    }

    game();

  </script>
</body>
</html>